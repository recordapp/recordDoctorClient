</i></p>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="container">
                <div class="col-md-12" id="graphSection">
                    <div id="chartContainer" style="height: 300px; width: 100%;">
                </div>
            </div>
        </div>
        
        
        
        <!-- Importing other libraries -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        <link href='http://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.13.1/jquery.validate.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/canvasjs/1.7.0/canvasjs.min.js"></script>
        
        <script>
            
            var username = "medrockweek1";
            var password = "medrockweek1";

            // api query urls
            var baseUrl = 'https://rest.ehrscape.com/rest/v1';
            var queryUrl = baseUrl + '/query';

            // Gets the sessionID from our username and password (even though it supposedly doesn't work).

            function getSessionId() {

                var response = $.ajax({
                    type: "POST",
                    url: baseUrl + "/session?username=" + encodeURIComponent(username) +
                            "&password=" + encodeURIComponent(password),
                    async: false
                });
                return response.responseJSON.sessionId;
            }

            
            var aql = "select     a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as Weight_magnitude,     a_b/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as Total_water_percentage_magnitude,     a_a/data[at0002]/origin/value from EHR e contains COMPOSITION a contains (     OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_weight.v1] and     OBSERVATION a_b[openEHR-EHR-OBSERVATION.body_water.v0]) offset 0 limit 100";
            
            var sessionId = getSessionId();
            
            function removeChars(toEdit) {
                toEdit.substring(0, 10);
                toEdit.replace("-","");
                return toEdit;
            }
            
            function findDate(object) {
                for (var i = 0; i < object.length; i++) {
                    if (object[i].key == "#2") {
                        return object[i].value;
                    }
                }
            }

            var podatki;
            
            $.ajax({
                url: baseUrl + "/query?" + $.param({"aql": aql}),
                type: 'GET',
                headers: {"Ehr-Session": sessionId},
                success: function (res) {
                    
                        podatki = res;
                    
                }
            });
            
            window.onload = function () {
                var chart = new CanvasJS.Chart("graphSection", {
                    title: {
                        text: "Site Traffic",
                        fontSize: 30
                    },
                    animationEnabled: true,
                    axisX: {
                        gridColor: "Silver",
                        tickColor: "silver",
                        valueFormatString: "DD/MMM"
                    },
                    toolTip: {
                        shared: true
                    },
                    theme: "theme2",
                    axisY: {
                        gridColor: "Silver",
                        tickColor: "silver"
                    },
                    legend: {
                        verticalAlign: "center",
                        horizontalAlign: "right"
                    },
                    data: [
                    {
                        type: "line",
                        showInLegend: true,
                        lineThickness: 2,
                        name: "Visits",
                        markerType: "square",
                        color: "#F08080",
                        dataPoints: [
                        { x: new Date(2010, 0, 3), y: 650 },
                        { x: new Date(2010, 0, 5), y: 700 },
                        { x: new Date(2010, 0, 7), y: 710 },
                        { x: new Date(2010, 0, 9), y: 658 },
                        { x: new Date(2010, 0, 11), y: 734 },
                        { x: new Date(2010, 0, 13), y: 963 },
                        { x: new Date(2010, 0, 15), y: 847 },
                        { x: new Date(2010, 0, 17), y: 853 },
                        { x: new Date(2010, 0, 19), y: 869 },
                        { x: new Date(2010, 0, 21), y: 943 },
                        { x: new Date(2010, 0, 23), y: 970 }
                        ]
                    },
                    {
                        type: "line",
                        showInLegend: true,
                        name: "Unique Visits",
                        color: "#20B2AA",
                        lineThickness: 2,

                        dataPoints: [
                        { x: new Date(2010, 0, 3), y: 510 },
                        { x: new Date(2010, 0, 5), y: 560 },
                        { x: new Date(2010, 0, 7), y: 540 },
                        { x: new Date(2010, 0, 9), y: 558 },
                        { x: new Date(2010, 0, 11), y: 544 },
                        { x: new Date(2010, 0, 13), y: 693 },
                        { x: new Date(2010, 0, 15), y: 657 },
                        { x: new Date(2010, 0, 17), y: 663 },
                        { x: new Date(2010, 0, 19), y: 639 },
                        { x: new Date(2010, 0, 21), y: 673 },
                        { x: new Date(2010, 0, 23), y: 660 }
                        ]
                    }
                    ],
                    legend: {
                        cursor: "pointer",
                        itemclick: function (e) {
                            if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                                e.dataSeries.visible = false;
                            }
                            else {
                                e.dataSeries.visible = true;
                            }
                            chart.render();
                        }
                    }
                });

                chart.render();
            }
            
           
            
            </script>

        
    </body>
</html>