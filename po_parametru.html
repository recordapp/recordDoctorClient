</i></p>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="container">
                <div class="col-md-12" id="graphSection">
                </div>
            </div>
        </div>
        
        
        
        <!-- Importing other libraries -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        <link href='http://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.13.1/jquery.validate.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/canvasjs/1.7.0/canvasjs.min.js"></script>
        
        <script>
            
            var username = "medrockweek1";
            var password = "medrockweek1";

            // api query urls
            var baseUrl = 'https://rest.ehrscape.com/rest/v1';
            var queryUrl = baseUrl + '/query';

            // Gets the sessionID from our username and password (even though it supposedly doesn't work).

            function getSessionId() {

                var response = $.ajax({
                    type: "POST",
                    url: baseUrl + "/session?username=" + encodeURIComponent(username) +
                            "&password=" + encodeURIComponent(password),
                    async: false
                });
                return response.responseJSON.sessionId;
            }

            
            var aql = "select     a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as Weight_magnitude,     a_b/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as Total_water_percentage_magnitude,     a_a/data[at0002]/origin/value from EHR e contains COMPOSITION a contains (     OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_weight.v1] and     OBSERVATION a_b[openEHR-EHR-OBSERVATION.body_water.v0]) offset 0 limit 100";
            
            var sessionId = getSessionId();
            
            function removeChars(toEdit) {
                toEdit.substring(0, 10);
                toEdit.replace("-","");
                return toEdit;
            }
            
            function findDate(object) {
                for (var i = 0; i < object.length; i++) {
                    if (object[i].key == "#2") {
                        return object[i].value;
                    }
                }
            }

            var podatki;
            
            $.ajax({
                url: baseUrl + "/query?" + $.param({"aql": aql}),
                type: 'GET',
                headers: {"Ehr-Session": sessionId},
                success: function (res) {
                    
                        podatki = res;
                    
                        var chart = new CanvasJS.Chart("graphSection",  {
                            title:{
                            text: "Multi-Series Line Chart"  
                            },
                            // data: podatki
                            data: [
                              {        
                                type: "line",
                                dataPoints: [
                                { x: 10, y: 21 },
                                { x: 20, y: 25},
                                { x: 30, y: 20 },
                                { x: 40, y: 25 },
                                { x: 50, y: 27 },
                                { x: 60, y: 28 },
                                { x: 70, y: 28 },
                                { x: 80, y: 24 },
                                { x: 90, y: 26}

                                ]
                              },
                                {        
                                type: "line",
                                dataPoints: [
                                { x: 10, y: 31 },
                                { x: 20, y: 35},
                                { x: 30, y: 30 },
                                { x: 40, y: 35 },
                                { x: 50, y: 35 },
                                { x: 60, y: 38 },
                                { x: 70, y: 38 },
                                { x: 80, y: 34 },
                                { x: 90, y: 44}

                                ]
                              },
                                {        
                                type: "line",
                                dataPoints: [
                                { x: 10, y: 45 },
                                { x: 20, y: 50},
                                { x: 30, y: 40 },
                                { x: 40, y: 45 },
                                { x: 50, y: 45 },
                                { x: 60, y: 48 },
                                { x: 70, y: 43 },
                                { x: 80, y: 41 },
                                { x: 90, y: 28}

                                ]
                              },
                                {        
                                type: "line",
                                dataPoints: [
                                { x: 10, y: 71 },
                                { x: 20, y: 55},
                                { x: 30, y: 50 },
                                { x: 40, y: 65 },
                                { x: 50, y: 95 },
                                { x: 60, y: 68 },
                                { x: 70, y: 28 },
                                { x: 80, y: 34 },
                                { x: 90, y: 14}

                                ]
                              }
                            ]

                        });

                        chart.render();
                }
            });
            
           
            
            </script>

        
    </body>
</html>